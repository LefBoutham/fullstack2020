(this.webpackJsonppart1=this.webpackJsonppart1||[]).push([[0],{15:function(e,n,t){e.exports=t(38)},37:function(e,n,t){},38:function(e,n,t){"use strict";t.r(n);var a=t(0),r=t.n(a),l=t(14),o=t.n(l),u=t(4),c=t(2),i=function(e){var n=e.onDelete,t=e.person;return r.a.createElement(r.a.Fragment,null,t.name," ",t.number," ",r.a.createElement("button",{onClick:function(){return n(t)}},"Delete"),r.a.createElement("br",null))},m=function(e){var n=e.persons,t=e.filter,a=e.onDelete,l=n.filter((function(e){return e.name.toLowerCase().includes(t.toLowerCase())})).map((function(e){return r.a.createElement(i,{key:e.name,person:e,onDelete:a})}));return r.a.createElement(r.a.Fragment,null,l)},s=function(e){return r.a.createElement(r.a.Fragment,null,"filter shown with"," ",r.a.createElement("input",{value:e.value,onChange:e.handleFilter})," ",r.a.createElement("br",null))},d=function(e){var n=e.nameInput,t=e.handleNameChange,a=e.handleNumberChange,l=e.numberInput,o=e.addNewPerson;return r.a.createElement(r.a.Fragment,null,r.a.createElement("form",null,r.a.createElement("div",null,"name: ",r.a.createElement("input",{value:n,onChange:t})),r.a.createElement("div",null,"number: ",r.a.createElement("input",{value:l,onChange:a})),r.a.createElement("div",null,r.a.createElement("button",{onClick:o,type:"submit"},"add"))))},f=t(3),h=t.n(f),b="/api/persons",p=function(){return h.a.get(b)},v=function(e){return h.a.post(b,e)},E=function(e,n){return h.a.put("".concat(b,"/").concat(e),n)},g=function(e){return h.a.delete("".concat(b,"/").concat(e))},j=(t(37),function(e){var n=e.message;return null===n?null:r.a.createElement("div",{className:"error"},n)}),w=function(e){var n=e.message;return null===n?null:r.a.createElement("div",{className:"success"},n)},O=function(){var e=Object(a.useState)([{name:"Arto Hellas",number:"040-123456"}]),n=Object(c.a)(e,2),t=n[0],l=n[1],o=Object(a.useState)(""),i=Object(c.a)(o,2),f=i[0],h=i[1],b=Object(a.useState)(""),O=Object(c.a)(b,2),C=O[0],N=O[1],k=Object(a.useState)(""),D=Object(c.a)(k,2),I=D[0],P=D[1],y=Object(a.useState)(null),F=Object(c.a)(y,2),S=F[0],A=F[1],T=Object(a.useState)(null),x=Object(c.a)(T,2),J=x[0],L=x[1];Object(a.useEffect)((function(){p().then((function(e){l(e.data)}))}),[]);return r.a.createElement("div",null,r.a.createElement("h2",null,"Phonebook"),r.a.createElement(j,{message:S}),r.a.createElement(w,{message:J}),r.a.createElement(s,{value:I,persons:t,handleFilter:function(e){return P(e.target.value)}}),r.a.createElement("h3",null,"Add a new"),r.a.createElement(d,{nameInput:f,numberInput:C,handleNameChange:function(e){return h(e.target.value)},handleNumberChange:function(e){return N(e.target.value)},addNewPerson:function(e){e.preventDefault();var n=t.some((function(e){return e.name===f})),a=t.some((function(e){return e.number===C&&e.name===f}));if(n&&a)alert("".concat(f," is already added to phonebook"));else if(n){if(window.confirm("".concat(f," is already added to the phonebook, replace old number with a new one?"))){var r=t.filter((function(e){return e.name===f}))[0];console.log(r);var o=Object(u.a)(Object(u.a)({},r),{},{number:C});console.log(o),E(r.id,o).then((function(e){console.log(e.data);var n=t,a=n.findIndex((function(e){return e===r}));n[a]=e.data,l(n),L("Edited ".concat(r.name)),setTimeout((function(){return L(null)}),5e3),console.log(n)})).catch((function(e){console.error(e.response.data),console.error(e.response.status),console.error(e.response.headers),A("Information of ".concat(o.name," has already been removed from the server")),setTimeout((function(){return A(null)}),5e3)})),h(""),N("")}}else{var c={name:f,number:C};v(c).then((function(e){var n=Object(u.a)(Object(u.a)({},c),{},{id:e.data.id});l(t.concat(n)),h(""),N(""),L("Added ".concat(n.name)),setTimeout((function(){return L(null)}),5e3)})).catch((function(e){f.length<3?A("Person validation failed: Path 'name' ('".concat(f,"') is shorter than the minimum allowed length (3)")):C.length<8&&A("Person validation failed: Path 'number' ('".concat(C,"') is shorter than the minimum allowed length (8)"))}))}}}),r.a.createElement("h3",null,"Numbers"),r.a.createElement(m,{persons:t,filter:I,onDelete:function(e){if(window.confirm("Delete ".concat(e.name," ?"))){var n=t.filter((function(n){return n.id!==e.id}));g(e.id),console.log(n),l(n)}}}))};o.a.render(r.a.createElement(O,null),document.getElementById("root"))}},[[15,1,2]]]);
//# sourceMappingURL=main.c11b5b29.chunk.js.map